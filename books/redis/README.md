# 黄健宏. Redis 设计与实现. 机械工业出版社. 第一版

黄健宏. Redis 设计与实现. 机械工业出版社. 第一版

公司图书订购问卷我填了这本书，有必要趁机好好了解 Redis 。

![](./images/20220823.jpg)

本书官网见 [http://redisbook.com/](http://redisbook.com/) 。

<!-- @import "[TOC]" {cmd="toc" depthFrom=2 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

  - [第 1 章 引言](#第-1-章-引言)
- [第一部分 数据结构与对象](#第一部分-数据结构与对象)
  - [第 2 章 简单动态字符串](#第-2-章-简单动态字符串)
  - [第 3 章 链表](#第-3-章-链表)
  - [第 4 章 字典](#第-4-章-字典)
  - [第 5 章 跳跃表](#第-5-章-跳跃表)
  - [第 6 章 整数集合](#第-6-章-整数集合)
  - [第 7 章 压缩列表](#第-7-章-压缩列表)
  - [第 8 章 对象](#第-8-章-对象)
- [第二部分 单机数据库的实现](#第二部分-单机数据库的实现)
- [第三部分 多机数据库的实现](#第三部分-多机数据库的实现)
- [第四部分 独立功能的实现](#第四部分-独立功能的实现)

<!-- /code_chunk_output -->

### 第 1 章 引言

介绍了本书各章节的内容及关系。

## 第一部分 数据结构与对象

第一部分可以换一个名字：“ C 语言数据结构设计与实践”。 Redis 为「如何在 C 语言中封装工程可用的数据结构」提供了一种工程实践范例：
- 如何使用 C 宏
- 定义了基本的数据结构及其 API
- 定义了“数据结构对象”这一个更高层次的概念，内部实现数据结构的「动态选型」与转化，从而完成时间空间的 trade off

### 第 2 章 简单动态字符串

[./drafts/ch.02.md](./drafts/ch.02.md)

- [2.1 SDS 的定义](./drafts/ch.02.md#21-sds-的定义)
- [2.2 SDS 与 C 字符串的区别](./drafts/ch.02.md#22-sds-与-c-字符串的区别)
  - [2.2.1 常数复杂度获取字符串的长度](./drafts/ch.02.md#221-常数复杂度获取字符串的长度)
  - [2.2.2 杜绝缓冲区溢出](./drafts/ch.02.md#222-杜绝缓冲区溢出)
  - [2.2.3 减少修改字符串时带来的内存重分配次数](./drafts/ch.02.md#223-减少修改字符串时带来的内存重分配次数)
  - [2.2.4 二进制安全](./drafts/ch.02.md#224-二进制安全)
  - [2.2.5 兼容部分 C 字符串函数](./drafts/ch.02.md#225-兼容部分-c-字符串函数)
- [2.3 SDS API](./drafts/ch.02.md#23-sds-api)
- [2.4 重点回顾](./drafts/ch.02.md#24-重点回顾)
- [2.5 参考资料](./drafts/ch.02.md#25-参考资料)
- [sds 源码阅读（重要）](./drafts/ch.02.md#sds-源码阅读重要)
  - [c 语言丰富的宏预处理](./drafts/ch.02.md#c-语言丰富的宏预处理)
  - [c 语言结构体中数组指针不占用 struct size](./drafts/ch.02.md#c-语言结构体中数组指针不占用-struct-size)

### 第 3 章 链表

[./drafts/ch.03.md](./drafts/ch.03.md)

- [3.1 链表和链表节点的实现](./drafts/ch.03.md#31-链表和链表节点的实现)
- [3.2 链表和链表节点的 API](./drafts/ch.03.md#32-链表和链表节点的-api)
- [3.3 重点回顾](./drafts/ch.03.md#33-重点回顾)

### 第 4 章 字典

[./drafts/ch.04.md](./drafts/ch.04.md)

- [4.1 字典的实现](./drafts/ch.04.md#41-字典的实现)
- [4.2 哈希算法](./drafts/ch.04.md#42-哈希算法)
- [4.3 解决键冲突](./drafts/ch.04.md#43-解决键冲突)
- [4.4 rehash](./drafts/ch.04.md#44-rehash)
- [4.5 渐进式 rehash](./drafts/ch.04.md#45-渐进式-rehash)
- [阅读源码：启动 server -> event loop -> 触发 rehash](./drafts/ch.04.md#阅读源码启动-server-event-loop-触发-rehash)

### 第 5 章 跳跃表

[./drafts/ch.05.md](./drafts/ch.05.md)

- [5.1 跳跃表的实现](./drafts/ch.05.md#51-跳跃表的实现)
  - [5.1.1 跳跃表节点](./drafts/ch.05.md#511-跳跃表节点)
  - [5.1.2 跳跃表](./drafts/ch.05.md#512-跳跃表)
- [5.2 跳跃表 API](./drafts/ch.05.md#52-跳跃表-api)
- [5.3 重点回顾](./drafts/ch.05.md#53-重点回顾)

### 第 6 章 整数集合

[./drafts/ch.06.md](./drafts/ch.06.md)

- [6.1 整数集合的实现](./drafts/ch.06.md#61-整数集合的实现)
- [6.2 升级](./drafts/ch.06.md#62-升级)
- [6.3 升级的好处](./drafts/ch.06.md#63-升级的好处)
  - [6.3.1 提升灵活性](./drafts/ch.06.md#631-提升灵活性)
  - [6.3.2 节约内存](./drafts/ch.06.md#632-节约内存)
- [6.4 降级](./drafts/ch.06.md#64-降级)
- [6.5 整数集合 API](./drafts/ch.06.md#65-整数集合-api)

### 第 7 章 压缩列表

[./drafts/ch.07.md](./drafts/ch.07.md)

- [7.1 压缩列表的构成](./drafts/ch.07.md#71-压缩列表的构成)
- [7.2 压缩列表节点的构成](./drafts/ch.07.md#72-压缩列表节点的构成)
  - [7.2.1 previous_entry_length](./drafts/ch.07.md#721-previous_entry_length)
  - [7.2.2 encoding](./drafts/ch.07.md#722-encoding)
  - [7.2.3 content](./drafts/ch.07.md#723-content)
- [7.3 连锁更新](./drafts/ch.07.md#73-连锁更新)
- [7.4 压缩列表 API](./drafts/ch.07.md#74-压缩列表-api)

### 第 8 章 对象

[./drafts/ch.08.md](./drafts/ch.08.md)

- [8.1 对象的类型与编码](./drafts/ch.08.md#81-对象的类型与编码)
  - [8.1.1 类型](./drafts/ch.08.md#811-类型)
  - [8.1.2 编码和底层实现](./drafts/ch.08.md#812-编码和底层实现)
- [8.2 字符串对象](./drafts/ch.08.md#82-字符串对象)
  - [8.2.1 编码的转换](./drafts/ch.08.md#821-编码的转换)
  - [8.2.2 字符串命令的实现](./drafts/ch.08.md#822-字符串命令的实现)
- [8.3 列表对象](./drafts/ch.08.md#83-列表对象)
  - [8.3.1 编码转换](./drafts/ch.08.md#831-编码转换)
  - [8.3.2 列表命令的实现](./drafts/ch.08.md#832-列表命令的实现)
- [8.4 哈希对象](./drafts/ch.08.md#84-哈希对象)
  - [8.4.1 编码转换](./drafts/ch.08.md#841-编码转换)
  - [8.4.2 哈希命令的实现](./drafts/ch.08.md#842-哈希命令的实现)
- [8.5 集合对象](./drafts/ch.08.md#85-集合对象)
  - [8.5.1 编码的转换](./drafts/ch.08.md#851-编码的转换)
  - [8.5.2 集合命令的实现](./drafts/ch.08.md#852-集合命令的实现)
- [8.6 有序集合对象](./drafts/ch.08.md#86-有序集合对象)
  - [8.6.1 编码的转换](./drafts/ch.08.md#861-编码的转换)
  - [8.6.2 有序集合命令的实现](./drafts/ch.08.md#862-有序集合命令的实现)
- [8.7 类型检查与命令多态](./drafts/ch.08.md#87-类型检查与命令多态)
  - [8.7.1 类型检查的实现](./drafts/ch.08.md#871-类型检查的实现)
  - [8.7.2 多态命令的实现](./drafts/ch.08.md#872-多态命令的实现)
- [8.8 内存回收](./drafts/ch.08.md#88-内存回收)
- [8.9 对象共享](./drafts/ch.08.md#89-对象共享)
- [8.10 对象的空转时长](./drafts/ch.08.md#810-对象的空转时长)

## 第二部分 单机数据库的实现

### 第 9 章 数据库

[./drafts/ch.09.md](./drafts/ch.09.md)

- [9.1 服务器中的数据库](./drafts/ch.09.md#91-服务器中的数据库)
- [9.2 切换数据库](./drafts/ch.09.md#92-切换数据库)
- [9.3 数据库键空间（redisDb）](./drafts/ch.09.md#93-数据库键空间redisdb)
  - [9.3.1 添加新键](./drafts/ch.09.md#931-添加新键)
  - [9.3.2 删除键](./drafts/ch.09.md#932-删除键)
  - [9.3.3 更新键](./drafts/ch.09.md#933-更新键)
  - [9.3.4 对键取值](./drafts/ch.09.md#934-对键取值)
  - [9.3.5 其他键空间操作](./drafts/ch.09.md#935-其他键空间操作)
  - [9.3.6 读写键空间时的维护操作](./drafts/ch.09.md#936-读写键空间时的维护操作)
- [9.4 设置键的生存时间或过期时间](./drafts/ch.09.md#94-设置键的生存时间或过期时间)
  - [9.4.1 设置过期时间](./drafts/ch.09.md#941-设置过期时间)
  - [9.4.2 保存过期时间](./drafts/ch.09.md#942-保存过期时间)
  - [9.4.3 移除过期时间](./drafts/ch.09.md#943-移除过期时间)
  - [9.4.4 计算并返回剩余剩余生存时间](./drafts/ch.09.md#944-计算并返回剩余剩余生存时间)
  - [9.4.5 过期键的判定](./drafts/ch.09.md#945-过期键的判定)
- [9.5 过期键删除策略](./drafts/ch.09.md#95-过期键删除策略)
  - [9.5.1 定时删除](./drafts/ch.09.md#951-定时删除)
  - [9.5.2 惰性删除](./drafts/ch.09.md#952-惰性删除)
  - [9.5.3 定期删除](./drafts/ch.09.md#953-定期删除)
- [9.6 Redis 的过期键删除策略](./drafts/ch.09.md#96-redis-的过期键删除策略)
  - [9.6.1 惰性删除策略的实现](./drafts/ch.09.md#961-惰性删除策略的实现)
  - [9.6.2 定期删除策略的实现（随机选取键判断是否过期）](./drafts/ch.09.md#962-定期删除策略的实现随机选取键判断是否过期)
- [9.7 AOF 、 RDB 和复制功能对过期键的处理](./drafts/ch.09.md#97-aof---rdb-和复制功能对过期键的处理)
  - [9.7.1 生成 RDB 文件](./drafts/ch.09.md#971-生成-rdb-文件)
  - [9.7.2 载入 RDB 文件](./drafts/ch.09.md#972-载入-rdb-文件)
  - [9.7.3 AOF 文件写入](./drafts/ch.09.md#973-aof-文件写入)
  - [9.7.4 AOF 重写](./drafts/ch.09.md#974-aof-重写)
  - [9.7.5 复制](./drafts/ch.09.md#975-复制)
- [9.8 数据库通知](./drafts/ch.09.md#98-数据库通知)
  - [9.8.1 发送通知](./drafts/ch.09.md#981-发送通知)
  - [9.8.2 发送通知的实现](./drafts/ch.09.md#982-发送通知的实现)



## 第三部分 多机数据库的实现

## 第四部分 独立功能的实现
