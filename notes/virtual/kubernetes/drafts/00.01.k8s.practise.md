# k8s 的 webhook 经验

<!-- @import "[TOC]" {cmd="toc" depthFrom=3 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [开发 webhook 的流程](#开发-webhook-的流程)

<!-- /code_chunk_output -->

需要开发 k8s webhook 插件。

### 开发 webhook 的流程

可参考：
- [marcel-dempers / docker-development-youtube-series](https://github.com/marcel-dempers/docker-development-youtube-series/tree/master/kubernetes/admissioncontrollers/introduction)

具体开发流程我开发完项目再来复盘。

目前觉得很重要的是 TLS 协议的注意事项：
- [kubernetes.io: Generate Certificates Manually](https://kubernetes.io/docs/tasks/administer-cluster/certificates/)
- [New Kubernetes Cluster: remote error: tls: bad certificate](https://devops.stackexchange.com/questions/1765/new-kubernetes-cluster-remote-error-tls-bad-certificate)

最重要的是，如果用 openssl 配置 TLS ，需要配置 `.conf` ，让 `the certificate's DN matches the hostname` 。

